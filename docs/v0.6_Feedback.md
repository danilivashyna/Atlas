# Feedback Loop v0.6.x: Online Learning

## Overview

Feedback Loop enables online learning through user feedback, updating node weights, link scores, and semantic vectors via EMA smoothing.

## Features

### Feedback Types
- `positive`: Increase weight/score
- `negative`: Decrease weight/score
- Content-aware updates with ancestor propagation

### Updates
- Node weights: ±0.01 adjustment
- Link scores: ±0.02 adjustment
- Semantic vectors: EMA with α=0.02
- Ancestor decay: 0.5 factor

### API Endpoint

#### POST /router/feedback
Submit feedback for routing result.
```json
{
  "path": "dim2/dim2.4",
  "feedback": "positive",
  "text": "cats and dogs",
  "content_id": "doc123"
}
```

## Algorithm

1. Update target node weight
2. Propagate to ancestors with decay
3. Update link score if content_id provided
4. Update semantic vector via EMA if text provided
5. Ensure transaction safety

## Metrics

- `feedback_positive_total`: Positive feedback count
- `feedback_negative_total`: Negative feedback count
- `feedback_link_updates_total`: Link score updates
- `feedback_ema_updates_total`: Vector EMA updates

## Safety

- Clamped updates prevent extreme values
- Transaction rollback on errors
- Logging for audit trail
