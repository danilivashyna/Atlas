# Atlas v0.2 Quick Start Guide

## Overview

Atlas v0.2 introduces **hierarchical semantic space** - a "matryoshka" 5D space with recursive sub-dimensions. This guide will help you get started quickly.

## What's New in v0.2

- **Hierarchical Encoding**: Encode text into a tree structure with recursive sub-dimensions
- **Path-based Manipulation**: Surgical edits at specific paths in the semantic tree
- **Enhanced CLI**: New commands for hierarchical operations (`encode-h`, `decode-h`, `manipulate-h`)
- **Improved API**: New endpoints `/encode_h`, `/decode_h`, `/manipulate_h`

## Installation

```bash
# Clone the repository
git clone https://github.com/danilivashyna/Atlas.git
cd Atlas

# Create virtual environment
python -m venv .venv
source .venv/bin/activate  # On Windows: .venv\Scripts\activate

# Install dependencies
pip install -U pip wheel
pip install -r requirements.txt

# Install package in development mode
pip install -e .

# Verify installation
atlas info
```

## Quick Examples

### 1. Basic Encoding (Flat 5D)

```bash
# Encode text to 5D vector
atlas encode "–°–æ–±–∞–∫–∞" --explain

# Output:
# 5D Vector: [0.1, 0.9, -0.5, 0.2, 0.8]
# 
# Dimensional Interpretation:
# dim‚ÇÅ = 0.10 ‚Üí —Å–ª–µ–≥–∫–∞ action (–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ—Ä–∞–∑—ã)
# dim‚ÇÇ = 0.90 ‚Üí —Å–∏–ª—å–Ω–æ positive (–≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ç–æ–Ω)
# dim‚ÇÉ = -0.50 ‚Üí —É–º–µ—Ä–µ–Ω–Ω–æ concrete (–£—Ä–æ–≤–µ–Ω—å –æ–±–æ–±—â–µ–Ω–∏—è)
# dim‚ÇÑ = 0.20 ‚Üí —Å–ª–µ–≥–∫–∞ world (–¢–æ—á–∫–∞ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è)
# dim‚ÇÖ = 0.80 ‚Üí —Å–∏–ª—å–Ω–æ living (–°—É—â–Ω–æ—Å—Ç–Ω–∞—è –ø—Ä–∏—Ä–æ–¥–∞)
```

### 2. Hierarchical Encoding (NEW!)

```bash
# Encode text with hierarchical structure
atlas encode-h "–õ—é–±–æ–≤—å" --max-depth 2 --expand-threshold 0.2

# Output:
# [root] love (w=1.00)
#   value: [0.15, 0.92, 0.35, -0.10, 0.68]
#   [dim2] positive-affective (w=0.92)
#     value: [0.18, 0.95, 0.28, -0.05, 0.72]
#     [dim2.4] warmth (w=0.78)
#       value: [0.22, 0.98, 0.20, 0.00, 0.80]
```

### 3. Decoding

```bash
# Decode vector back to text
atlas decode --vector 0.1 0.9 -0.5 0.2 0.8 --reasoning

# Output:
# Reasoning Process:
# –Ø —á—É–≤—Å—Ç–≤—É—é, —á—Ç–æ:
# dim‚ÇÅ = 0.10 ‚Üí —Å–ª–µ–≥–∫–∞ action
# dim‚ÇÇ = 0.90 ‚Üí —Å–∏–ª—å–Ω–æ positive
# dim‚ÇÉ = -0.50 ‚Üí —É–º–µ—Ä–µ–Ω–Ω–æ concrete
# dim‚ÇÑ = 0.20 ‚Üí —Å–ª–µ–≥–∫–∞ world
# dim‚ÇÖ = 0.80 ‚Üí —Å–∏–ª—å–Ω–æ living
# ‚Üí –∏—Ç–æ–≥: "–°–æ–±–∞–∫–∞"
```

### 4. Dimension Manipulation

```bash
# Change emotional tone (dimension 1) from positive to negative
atlas manipulate "–†–∞–¥–æ—Å—Ç—å" --dimension 1 --value -0.9 --reasoning

# Output:
# === ORIGINAL ===
# Text: "–†–∞–¥–æ—Å—Ç—å"
# Decoded: "–†–∞–¥–æ—Å—Ç—å"
# 
# === MODIFIED ===
# Changed: dim‚ÇÅ (–ü–æ–∑–∏—Ç–∏–≤ ‚Üî –ù–µ–≥–∞—Ç–∏–≤)
# New value: -0.9
# Decoded: "–ì—Ä—É—Å—Ç—å"
```

### 5. Hierarchical Manipulation (NEW!)

```bash
# Surgical edit at specific path
atlas manipulate-h "–°–æ–±–∞–∫–∞" --edit dim2/dim2.4=0.9,0.1,-0.2,0.0,0.0 --reasoning

# Output:
# === ORIGINAL ===
# Text: "–°–æ–±–∞–∫–∞"
# Path reasoning:
#   root: dog (w=1.00)
#   dim2: positive-entity (w=0.85)
# 
# === MODIFIED ===
# Edits applied: 1
#   dim2/dim2.4 = [0.90, 0.10, -0.20, 0.00, 0.00]
# Decoded: "–°—á–∞—Å—Ç–ª–∏–≤–∞—è —Å–æ–±–∞–∫–∞"
```

## Python API

### Flat Operations

```python
from atlas import SemanticSpace

# Initialize
space = SemanticSpace()

# Encode
vector = space.encode("–°–æ–±–∞–∫–∞")
print(f"Vector: {vector}")

# Decode with reasoning
result = space.decode(vector, with_reasoning=True)
print(result['reasoning'])
print(f"Text: {result['text']}")

# Manipulate dimension
result = space.manipulate_dimension(
    "–†–∞–¥–æ—Å—Ç—å",
    dimension=1,  # Emotional tone
    new_value=-0.9  # Make negative
)
print(f"Modified: {result['modified']['decoded']['text']}")

# Interpolate between concepts
results = space.interpolate("–õ—é–±–æ–≤—å", "–°—Ç—Ä–∞—Ö", steps=5)
for r in results:
    print(f"Step {r['step']}: {r['decoded']['text']}")
```

### Hierarchical Operations (NEW!)

```python
from atlas.hierarchical import HierarchicalEncoder, HierarchicalDecoder

# Initialize
encoder = HierarchicalEncoder()
decoder = HierarchicalDecoder()

# Encode to hierarchical tree
tree = encoder.encode_hierarchical(
    "–õ—é–±–æ–≤—å",
    max_depth=2,
    expand_threshold=0.2
)

# Decode with path reasoning
result = decoder.decode_hierarchical(tree, top_k=3, with_reasoning=True)
print(f"Text: {result['text']}")
for r in result['reasoning']:
    print(f"  {r.path}: {r.label} (weight={r.weight:.2f})")

# Manipulate specific path
modified_tree = decoder.manipulate_path(
    tree,
    path="dim2/dim2.4",
    new_value=[0.9, 0.1, -0.2, 0.0, 0.0]
)
modified_result = decoder.decode_hierarchical(modified_tree)
print(f"Modified: {modified_result['text']}")
```

## REST API

### Start the API Server

```bash
# Start server
uvicorn src.atlas.api.app:app --reload --port 8000

# Or with Docker
docker-compose up
```

### Flat Endpoints

```bash
# Encode text
curl -X POST "http://localhost:8000/encode" \
  -H "Content-Type: application/json" \
  -d '{"text": "–°–æ–±–∞–∫–∞", "lang": "ru"}'

# Decode vector
curl -X POST "http://localhost:8000/decode" \
  -H "Content-Type: application/json" \
  -d '{"vector": [0.1, 0.9, -0.5, 0.2, 0.8], "top_k": 3}'

# Explain text
curl -X POST "http://localhost:8000/explain" \
  -H "Content-Type: application/json" \
  -d '{"text": "–õ—é–±–æ–≤—å"}'
```

### Hierarchical Endpoints (NEW!)

```bash
# Encode hierarchically
curl -X POST "http://localhost:8000/encode_h" \
  -H "Content-Type: application/json" \
  -d '{"text": "–õ—é–±–æ–≤—å", "max_depth": 2, "expand_threshold": 0.2}'

# Decode hierarchical tree
curl -X POST "http://localhost:8000/decode_h" \
  -H "Content-Type: application/json" \
  -d '{"tree": {...}, "top_k": 3}'

# Manipulate by path
curl -X POST "http://localhost:8000/manipulate_h" \
  -H "Content-Type: application/json" \
  -d '{
    "text": "–°–æ–±–∞–∫–∞",
    "edits": [
      {"path": "dim2/dim2.4", "value": [0.9, 0.1, -0.2, 0.0, 0.0]}
    ]
  }'
```

## Testing

```bash
# Run all tests
pytest tests/ -v

# Run specific test modules
pytest tests/test_hierarchical.py -v
pytest tests/test_cli.py -v

# Run with coverage
pytest tests/ --cov=atlas --cov-report=html

# Run API smoke tests
pytest tests/test_api_smoke.py -v
```

## Architecture Overview

### 5 Semantic Dimensions

| Dimension | Semantic | Role |
|-----------|----------|------|
| dim‚ÇÅ | Object ‚Üî Action | Phrase structure |
| dim‚ÇÇ | Positive ‚Üî Negative | Emotional tone |
| dim‚ÇÉ | Abstract ‚Üî Concrete | Level of abstraction |
| dim‚ÇÑ | Self ‚Üî World | Point of observation |
| dim‚ÇÖ | Living ‚Üî Mechanical | Essential nature |

### Hierarchical Structure (v0.2)

```
Root (5D vector)
‚îú‚îÄ‚îÄ dim0 (sub-dimension 0)
‚îÇ   ‚îú‚îÄ‚îÄ dim0.0 (sub-sub-dimension)
‚îÇ   ‚îú‚îÄ‚îÄ dim0.1
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ dim1 (sub-dimension 1)
‚îÇ   ‚îú‚îÄ‚îÄ dim1.0
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îî‚îÄ‚îÄ ...
```

Each node in the tree has:
- **value**: 5D vector
- **weight**: Importance/confidence
- **label**: Human-readable interpretation
- **children**: Recursive sub-dimensions

## Common Use Cases

### 1. Text Analysis

```python
# Analyze semantic properties
result = space.transform("–õ—é–±–æ–≤—å", show_reasoning=True)
print(result['decoded']['reasoning'])
```

### 2. Concept Exploration

```python
# Explore how a dimension affects meaning
results = space.explore_dimension(
    "–ñ–∏–∑–Ω—å",
    dimension=2,  # Abstract ‚Üî Concrete
    range_vals=[-1.0, -0.5, 0.0, 0.5, 1.0]
)
for r in results:
    print(f"Value {r['value']:.2f}: {r['decoded']['text']}")
```

### 3. Semantic Interpolation

```python
# Smooth transition between concepts
results = space.interpolate("–õ—é–±–æ–≤—å", "–ù–µ–Ω–∞–≤–∏—Å—Ç—å", steps=5)
for r in results:
    print(f"Œ±={r['alpha']:.2f}: {r['decoded']['text']}")
```

### 4. Controlled Generation

```python
# Surgically edit semantic branches
modified = decoder.manipulate_path(
    tree,
    path="dim2/dim2.4",  # Specific emotional nuance
    new_value=[0.9, 0.1, -0.2, 0.0, 0.0]
)
```

## Troubleshooting

### Import Errors

```bash
# Make sure package is installed
pip install -e .

# Verify installation
python -c "import atlas; print(atlas.__version__)"
```

### API Not Starting

```bash
# Check if port is already in use
lsof -i :8000

# Try different port
uvicorn src.atlas.api.app:app --reload --port 8080
```

### Tests Failing

```bash
# Install test dependencies
pip install pytest pytest-cov httpx

# Run with verbose output
pytest tests/ -vv --tb=short
```

## Next Steps

- Read the full [DOCUMENTATION.md](../DOCUMENTATION.md)
- Explore [examples/](../examples/) for more demos
- Check [HIERARCHICAL_SPACE.md](HIERARCHICAL_SPACE.md) for v0.2 details
- Review [API documentation](http://localhost:8000/docs) (when server is running)
- Join development: [CONTRIBUTING.md](../CONTRIBUTING.md)

## Resources

- **Repository**: https://github.com/danilivashyna/Atlas
- **Documentation**: https://github.com/danilivashyna/Atlas/blob/main/DOCUMENTATION.md
- **Issues**: https://github.com/danilivashyna/Atlas/issues
- **License**: AGPL-3.0-or-later / Commercial dual license

---

**Atlas v0.2** - Where meaning meets hierarchical structure üó∫Ô∏è‚ú®
